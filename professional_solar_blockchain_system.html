<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlockWatts: Interactive Solar-Blockchain Energy Trading Ecosystem</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .main-container {
            max-width: 1800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            background: linear-gradient(135deg, #ff6b6b, #ffa726);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            color: #666;
            font-weight: 500;
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-btn:hover, .nav-btn.active {
            background: linear-gradient(135deg, #764ba2, #667eea);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .diagram-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            min-height: 600px;
        }

        .diagram-section {
            display: none;
        }

        .diagram-section.active {
            display: block;
        }

        .ecosystem-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(3, auto);
            gap: 25px;
            margin-bottom: 40px;
        }

        .layer-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .layer-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--card-gradient);
            border-radius: 15px 15px 0 0;
        }

        .layer-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            border-color: var(--hover-border);
        }

        .layer-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .layer-title .icon {
            font-size: 1.5rem;
        }

        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
        }

        .component {
            background: var(--component-bg);
            border-radius: 10px;
            padding: 12px 8px;
            text-align: center;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--component-text);
            border: 1px solid var(--component-border);
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .component:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Layer-specific styling */
        .physical-layer {
            --card-gradient: linear-gradient(135deg, #ff9a9e, #fecfef);
            --hover-border: #ff9a9e;
            grid-column: 1 / 3;
        }

        .physical-layer .component {
            --component-bg: linear-gradient(135deg, #ffeaa7, #fab1a0);
            --component-text: #2d3436;
            --component-border: #fdcb6e;
        }

        .govt-layer {
            --card-gradient: linear-gradient(135deg, #a8edea, #fed6e3);
            --hover-border: #a8edea;
            grid-column: 3 / 5;
        }

        .govt-layer .component {
            --component-bg: linear-gradient(135deg, #74b9ff, #0984e3);
            --component-text: white;
            --component-border: #0984e3;
        }

        .iot-layer {
            --card-gradient: linear-gradient(135deg, #d299c2, #fef9d7);
            --hover-border: #d299c2;
            grid-column: 1 / 2;
        }

        .iot-layer .component {
            --component-bg: linear-gradient(135deg, #fd79a8, #fdcb6e);
            --component-text: white;
            --component-border: #fd79a8;
        }

        .cloud-layer {
            --card-gradient: linear-gradient(135deg, #a29bfe, #6c5ce7);
            --hover-border: #a29bfe;
            grid-column: 2 / 3;
        }

        .cloud-layer .component {
            --component-bg: linear-gradient(135deg, #6c5ce7, #a29bfe);
            --component-text: white;
            --component-border: #6c5ce7;
        }

        .blockchain-layer {
            --card-gradient: linear-gradient(135deg, #fd79a8, #fdcb6e);
            --hover-border: #fd79a8;
            grid-column: 3 / 4;
        }

        .blockchain-layer .component {
            --component-bg: linear-gradient(135deg, #00b894, #00cec9);
            --component-text: white;
            --component-border: #00b894;
        }

        .trading-layer {
            --card-gradient: linear-gradient(135deg, #fdcb6e, #e17055);
            --hover-border: #fdcb6e;
            grid-column: 4 / 5;
        }

        .trading-layer .component {
            --component-bg: linear-gradient(135deg, #e17055, #fdcb6e);
            --component-text: white;
            --component-border: #e17055;
        }

        .users-layer {
            --card-gradient: linear-gradient(135deg, #00cec9, #55a3ff);
            --hover-border: #00cec9;
            grid-column: 1 / 3;
        }

        .users-layer .component {
            --component-bg: linear-gradient(135deg, #55a3ff, #0984e3);
            --component-text: white;
            --component-border: #0984e3;
        }

        .analytics-layer {
            --card-gradient: linear-gradient(135deg, #ff7675, #fd79a8);
            --hover-border: #ff7675;
            grid-column: 3 / 5;
        }

        .analytics-layer .component {
            --component-bg: linear-gradient(135deg, #ff7675, #fd79a8);
            --component-text: white;
            --component-border: #ff7675;
        }

        /* Flow Diagram Styles */
        .flow-title {
            text-align: center;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .flow-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .flow-step {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            min-width: 150px;
            font-weight: 600;
            position: relative;
            flex: 1;
            max-width: 200px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .flow-step:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .flow-step::after {
            content: '→';
            position: absolute;
            right: -25px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            color: #667eea;
            font-weight: bold;
        }

        .flow-step:last-child::after {
            display: none;
        }

        /* Detailed Diagram Styles */
        .detail-diagram {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }

        .detail-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #333;
            text-align: center;
        }

        .process-flow {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .process-step {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid var(--step-color);
            transition: all 0.3s ease;
        }

        .process-step:hover {
            transform: translateX(10px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .step-header {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--step-color);
        }

        .step-description {
            color: #666;
            line-height: 1.6;
        }

        .architecture-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .arch-component {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .arch-component:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        .back-btn {
            background: linear-gradient(135deg, #ff7675, #fd79a8);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 1200px) {
            .ecosystem-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .physical-layer,
            .govt-layer,
            .users-layer,
            .analytics-layer {
                grid-column: span 2;
            }
            
            .iot-layer,
            .cloud-layer,
            .blockchain-layer,
            .trading-layer {
                grid-column: span 1;
            }
        }

        @media (max-width: 768px) {
            .ecosystem-grid {
                grid-template-columns: 1fr;
            }
            
            .physical-layer,
            .govt-layer,
            .users-layer,
            .analytics-layer,
            .iot-layer,
            .cloud-layer,
            .blockchain-layer,
            .trading-layer {
                grid-column: span 1;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .flow-steps {
                flex-direction: column;
            }
            
            .flow-step::after {
                content: '↓';
                right: 50%;
                top: 100%;
                transform: translateX(50%);
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1>🌞 BlockWatts Ecosystem</h1>
            <p>Interactive Decentralized Solar Energy Trading Platform for India</p>
        </div>

        <div class="navigation">
            <button class="nav-btn active" onclick="showDiagram('overview')">🏠 System Overview</button>
            <button class="nav-btn" onclick="showDiagram('architecture')">🏗️ Architecture</button>
            <button class="nav-btn" onclick="showDiagram('trading-flow')">💹 Trading Flow</button>
            <button class="nav-btn" onclick="showDiagram('government')">🏛️ Government Process</button>
            <button class="nav-btn" onclick="showDiagram('iot-flow')">📡 IoT Data Flow</button>
            <button class="nav-btn" onclick="showDiagram('blockchain')">⛓️ Blockchain Process</button>
        </div>

        <div class="diagram-container">
            <!-- System Overview -->
            <div id="overview" class="diagram-section active">
                <div class="ecosystem-grid">
                    <!-- Physical Infrastructure -->
                    <div class="layer-card physical-layer" onclick="showDetailedDiagram('physical')">
                        <div class="layer-title">
                            <span class="icon">🏠</span>
                            Physical Solar Infrastructure
                        </div>
                        <div class="component-grid">
                            <div class="component">☀️ Solar Panels</div>
                            <div class="component">🔄 Inverter</div>
                            <div class="component">🔋 Battery Storage</div>
                            <div class="component">📊 Smart Meter</div>
                            <div class="component">⚙️ Charge Controller</div>
                            <div class="component">🏠 Home Load</div>
                            <div class="component">⚡ AC/DC Systems</div>
                            <div class="component">🔌 Grid Connection</div>
                        </div>
                    </div>

                    <!-- Government Integration -->
                    <div class="layer-card govt-layer" onclick="showDetailedDiagram('government')">
                        <div class="layer-title">
                            <span class="icon">🏛️</span>
                            Government Schemes & Compliance
                        </div>
                        <div class="component-grid">
                            <div class="component">📱 MNRE Portal</div>
                            <div class="component">📋 PM-KUSUM</div>
                            <div class="component">📄 eKYC Verification</div>
                            <div class="component">💰 40% Subsidy (3kW)</div>
                            <div class="component">🏭 DISCOM Integration</div>
                            <div class="component">✅ Net Metering</div>
                            <div class="component">📜 Regulatory Compliance</div>
                            <div class="component">🔍 Government Inspection</div>
                        </div>
                    </div>

                    <!-- IoT Communication -->
                    <div class="layer-card iot-layer" onclick="showDetailedDiagram('iot')">
                        <div class="layer-title">
                            <span class="icon">📡</span>
                            IoT Communication
                        </div>
                        <div class="component-grid">
                            <div class="component">🔌 ESP32 Gateway</div>
                            <div class="component">📶 LoRa Network</div>
                            <div class="component">📱 GSM/4G</div>
                            <div class="component">🌐 MQTT Protocol</div>
                            <div class="component">🔒 HTTPS/SSL</div>
                            <div class="component">📋 MODBUS RTU</div>
                        </div>
                    </div>

                    <!-- Cloud Infrastructure -->
                    <div class="layer-card cloud-layer" onclick="showDetailedDiagram('cloud')">
                        <div class="layer-title">
                            <span class="icon">☁️</span>
                            Cloud Infrastructure
                        </div>
                        <div class="component-grid">
                            <div class="component">🚪 API Gateway</div>
                            <div class="component">🔐 Authentication</div>
                            <div class="component">📊 Data Validation</div>
                            <div class="component">🗄️ InfluxDB</div>
                            <div class="component">📈 Real-time Analytics</div>
                            <div class="component">🤖 AI/ML Services</div>
                        </div>
                    </div>

                    <!-- Blockchain Layer -->
                    <div class="layer-card blockchain-layer" onclick="showDetailedDiagram('blockchain')">
                        <div class="layer-title">
                            <span class="icon">⛓️</span>
                            Blockchain & Smart Contracts
                        </div>
                        <div class="component-grid">
                            <div class="component">🔗 Smart Contracts</div>
                            <div class="component">💰 Dynamic Pricing</div>
                            <div class="component">🎯 Matching Engine</div>
                            <div class="component">🛡️ Escrow System</div>
                            <div class="component">📝 Immutable Ledger</div>
                            <div class="component">🔍 Consensus Mechanism</div>
                        </div>
                    </div>

                    <!-- Trading Platform -->
                    <div class="layer-card trading-layer" onclick="showDetailedDiagram('trading')">
                        <div class="layer-title">
                            <span class="icon">💹</span>
                            P2P Trading Platform
                        </div>
                        <div class="component-grid">
                            <div class="component">📊 Market Dashboard</div>
                            <div class="component">💳 Digital Wallet</div>
                            <div class="component">📈 Trading History</div>
                            <div class="component">🌍 Local Energy Map</div>
                            <div class="component">🚨 Alerts & Notifications</div>
                            <div class="component">📱 Mobile/Web App</div>
                        </div>
                    </div>

                    <!-- User Ecosystem -->
                    <div class="layer-card users-layer" onclick="showDetailedDiagram('users')">
                        <div class="layer-title">
                            <span class="icon">👥</span>
                            User Ecosystem & Stakeholders
                        </div>
                        <div class="component-grid">
                            <div class="component">🏠 Prosumer (Seller)</div>
                            <div class="component">🏠 Consumer (Buyer)</div>
                            <div class="component">👨‍🔧 Technician</div>
                            <div class="component">🏛️ Government Officials</div>
                            <div class="component">🏭 DISCOM Operators</div>
                            <div class="component">👥 Community Groups</div>
                            <div class="component">🌱 Environmental Advocates</div>
                            <div class="component">💼 Energy Traders</div>
                        </div>
                    </div>

                    <!-- Analytics & Advanced Features -->
                    <div class="layer-card analytics-layer" onclick="showDetailedDiagram('analytics')">
                        <div class="layer-title">
                            <span class="icon">📊</span>
                            Analytics & Advanced Features
                        </div>
                        <div class="component-grid">
                            <div class="component">⚡ Energy Generation Data</div>
                            <div class="component">📉 Consumption Patterns</div>
                            <div class="component">🌤️ Weather Integration</div>
                            <div class="component">💎 Carbon Credits</div>
                            <div class="component">🤖 Demand Forecasting</div>
                            <div class="component">🏆 Gamification</div>
                            <div class="component">👥 Community Pooling</div>
                            <div class="component">💹 Carbon Trading</div>
                        </div>
                    </div>
                </div>

                <!-- Statistics -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">10+</div>
                        <div class="stat-label">Integrated Layers</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">50+</div>
                        <div class="stat-label">System Components</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">24/7</div>
                        <div class="stat-label">Real-time Trading</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">100%</div>
                        <div class="stat-label">Transparent & Secure</div>
                    </div>
                </div>
            </div>

            <!-- Architecture Diagram -->
            <div id="architecture" class="diagram-section">
                <div class="flow-title">🏗️ System Architecture Layers</div>
                <div class="architecture-grid">
                    <div class="arch-component" style="background: linear-gradient(135deg, #ff9a9e, #fecfef);">
                        <h3>🏠 Physical Layer</h3>
                        <p>Solar panels, inverters, batteries, smart meters</p>
                    </div>
                    <div class="arch-component" style="background: linear-gradient(135deg, #d299c2, #fef9d7);">
                        <h3>📡 Communication Layer</h3>
                        <p>IoT gateways, LoRa, GSM, MQTT protocols</p>
                    </div>
                    <div class="arch-component" style="background: linear-gradient(135deg, #a29bfe, #6c5ce7);">
                        <h3>☁️ Cloud Layer</h3>
                        <p>APIs, databases, analytics, AI/ML services</p>
                    </div>
                    <div class="arch-component" style="background: linear-gradient(135deg, #fd79a8, #fdcb6e);">
                        <h3>⛓️ Blockchain Layer</h3>
                        <p>Smart contracts, consensus, immutable ledger</p>
                    </div>
                    <div class="arch-component" style="background: linear-gradient(135deg, #fdcb6e, #e17055);">
                        <h3>💹 Application Layer</h3>
                        <p>Trading platform, mobile apps, dashboards</p>
                    </div>
                    <div class="arch-component" style="background: linear-gradient(135deg, #a8edea, #fed6e3);">
                        <h3>🏛️ Integration Layer</h3>
                        <p>Government APIs, DISCOM integration, compliance</p>
                    </div>
                </div>
            </div>

            <!-- Trading Flow -->
            <div id="trading-flow" class="diagram-section">
                <div class="flow-title">💹 Complete Energy Trading Flow</div>
                <div class="flow-steps">
                    <div class="flow-step" onclick="showFlowDetail('generation')">
                        <div>☀️</div>
                        <div>Solar Generation</div>
                    </div>
                    <div class="flow-step" onclick="showFlowDetail('metering')">
                        <div>📊</div>
                        <div>Smart Meter Reading</div>
                    </div>
                    <div class="flow-step" onclick="showFlowDetail('iot-transfer')">
                        <div>📡</div>
                        <div>IoT Data Transfer</div>
                    </div>
                    <div class="flow-step" onclick="showFlowDetail('processing')">
                        <div>☁️</div>
                        <div>Cloud Processing</div>
                    </div>
                    <div class="flow-step" onclick="showFlowDetail('matching')">
                        <div>🤖</div>
                        <div>AI Matching</div>
                    </div>
                    <div class="flow-step" onclick="showFlowDetail('execution')">
                        <div>⛓️</div>
                        <div>Blockchain Execution</div>
                    </div>
                    <div class="flow-step" onclick="showFlowDetail('settlement')">
                        <div>💰</div>
                        <div>Payment Settlement</div>
                    </div>
                </div>
                
                <div id="flow-details" class="detail-diagram" style="display: none;">
                    <button class="back-btn" onclick="hideFlowDetail()">← Back to Flow</button>
                    <div id="flow-detail-content"></div>
                </div>
            </div>

            <!-- Government Process -->
            <div id="government" class="diagram-section">
                <div class="flow-title">🏛️ Government Scheme Implementation Process</div>
                <div class="process-flow">
                    <div class="process-step" style="--step-color: #74b9ff;">
                        <div class="step-header">📱 1. Online Registration</div>
                        <div class="step-description">Homeowner registers on MNRE portal, submits basic information and documents including Aadhaar, property papers, and electricity bills.</div>
                    </div>
                    <div class="process-step" style="--step-color: #00b894;">
                        <div class="step-header">🔍 2. eKYC Verification</div>
                        <div class="step-description">Automated identity verification using Aadhaar integration, document validation, and eligibility assessment for solar schemes.</div>
                    </div>
                    <div class="process-step" style="--step-color: #fdcb6e;">
                        <div class="step-header">👨‍🔧 3. Site Survey & Design</div>
                        <div class="step-description">Approved vendor conducts site assessment, measures roof space, calculates solar potential, and creates customized system design.</div>
                    </div>
                    <div class="process-step" style="--step-color: #fd79a8;">
                        <div class="step-header">💰 4. Subsidy Calculation</div>
                        <div class="step-description">System automatically calculates applicable subsidies: 40% for up to 3kW, 20% for 3-10kW capacity, with transparent cost breakdown.</div>
                    </div>
                    <div class="process-step" style="--step-color: #e17055;">
                        <div class="step-header">🏭 5. DISCOM Coordination</div>
                        <div class="step-description">Net metering agreement setup, grid connection approval, and coordination with local electricity distribution company.</div>
                    </div>
                    <div class="process-step" style="--step-color: #a29bfe;">
                        <div class="step-header">⚡ 6. Installation & Commissioning</div>
                        <div class="step-description">Professional installation of solar panels, inverters, smart meters, followed by system testing and grid synchronization.</div>
                    </div>
                    <div class="process-step" style="--step-color: #00cec9;">
                        <div class="step-header">✅ 7. Quality Inspection & Approval</div>
                        <div class="step-description">Government-appointed inspector verifies installation quality, safety compliance, and system performance before final approval.</div>
                    </div>
                    <div class="process-step" style="--step-color: #55a3ff;">
                        <div class="step-header">💸 8. Subsidy Disbursement</div>
                        <div class="step-description">Upon successful inspection, subsidy amount is directly transferred to the vendor's account, reducing customer's final payment.</div>
                    </div>
                </div>
            </div>

            <!-- IoT Data Flow -->
            <div id="iot-flow" class="diagram-section">
                <div class="flow-title">📡 IoT Data Flow and Smart Meter Integration</div>
                <div class="process-flow">
                    <div class="process-step" style="--step-color: #ff6b6b;">
                        <div class="step-header">📊 1. Smart Meter Data Collection</div>
                        <div class="step-description">Bidirectional smart meters continuously monitor energy generation from solar panels and consumption by home appliances, recording data every 15 minutes.</div>
                    </div>
                    <div class="process-step" style="--step-color: #4ecdc4;">
                        <div class="step-header">🔌 2. ESP32 Gateway Processing</div>
                        <div class="step-description">ESP32-based IoT gateway reads meter data using MODBUS RTU/DLMS protocols, processes locally, and prepares for transmission to cloud services.</div>
                    </div>
                    <div class="process-step" style="--step-color: #45b7d1;">
                        <div class="step-header">📶 3. LoRa Local Network</div>
                        <div class="step-description">Primary communication via LoRa network for low-power, long-range data transmission within local area networks, ensuring reliable connectivity.</div>
                    </div>
                    <div class="process-step" style="--step-color: #f9ca24;">
                        <div class="step-header">📱 4. GSM/4G Backup</div>
                        <div class="step-description">Cellular network serves as backup communication channel when LoRa is unavailable, ensuring 99.9% data transmission reliability.</div>
                    </div>
                    <div class="process-step" style="--step-color: #6c5ce7;">
                        <div class="step-header">🌐 5. MQTT Protocol</div>
                        <div class="step-description">Lightweight MQTT messaging protocol optimizes data packets for efficient transmission, reducing bandwidth usage and ensuring real-time delivery.</div>
                    </div>
                    <div class="process-step" style="--step-color: #a29bfe;">
                        <div class="step-header">☁️ 6. Cloud Data Processing</div>
                        <div class="step-description">Cloud API gateway receives encrypted data, validates authenticity, stores in InfluxDB time-series database, and triggers real-time analytics.</div>
                    </div>
                </div>
            </div>

            <!-- Blockchain Process -->
            <div id="blockchain" class="diagram-section">
                <div class="flow-title">⛓️ Blockchain Smart Contract Execution Process</div>
                <div class="process-flow">
                    <div class="process-step" style="--step-color: #00b894;">
                        <div class="step-header">⚡ 1. Energy Available</div>
                        <div class="step-description">Solar system generates excess energy, smart meter detects surplus, and prosumer decides to list energy for sale on the trading platform.</div>
                    </div>
                    <div class="process-step" style="--step-color: #fdcb6e;">
                        <div class="step-header">📊 2. Market Listing</div>
                        <div class="step-description">Energy listing created with quantity (kWh), desired price, availability timeframe, and seller preferences for buyer location/type.</div>
                    </div>
                    <div class="process-step" style="--step-color: #fd79a8;">
                        <div class="step-header">💰 3. Dynamic Pricing</div>
                        <div class="step-description">AI algorithms calculate optimal pricing based on real-time supply/demand, grid conditions, weather forecasts, and historical trading patterns.</div>
                    </div>
                    <div class="process-step" style="--step-color: #74b9ff;">
                        <div class="step-header">🎯 4. Buyer Matching</div>
                        <div class="step-description">Matching engine finds suitable buyers considering proximity, price acceptance, energy requirements, and trading history preferences.</div>
                    </div>
                    <div class="process-step" style="--step-color: #a29bfe;">
                        <div class="step-header">🔗 5. Smart Contract Creation</div>
                        <div class="step-description">Automated smart contract deployment with agreed terms: energy amount, price, delivery schedule, penalty clauses, and dispute resolution mechanisms.</div>
                    </div>
                    <div class="process-step" style="--step-color: #e17055;">
                        <div class="step-header">🛡️ 6. Escrow Setup</div>
                        <div class="step-description">Buyer's payment locked in blockchain escrow, ensuring seller gets paid upon delivery while protecting buyer from non-delivery.</div>
                    </div>
                    <div class="process-step" style="--step-color: #00cec9;">
                        <div class="step-header">⚡ 7. Energy Transfer</div>
                        <div class="step-description">Physical energy flows through grid infrastructure while blockchain tracks virtual ownership transfer and validates delivery through smart meter readings.</div>
                    </div>
                    <div class="process-step" style="--step-color: #55a3ff;">
                        <div class="step-header">💸 8. Automatic Settlement</div>
                        <div class="step-description">Upon confirmed delivery, smart contract automatically releases escrowed funds to seller, updates transaction records, and triggers platform notifications.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showDiagram(diagramId) {
            // Hide all diagram sections
            const sections = document.querySelectorAll('.diagram-section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Show selected diagram
            document.getElementById(diagramId).classList.add('active');
            
            // Update navigation buttons
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        function showDetailedDiagram(type) {
            const detailContent = getDetailedDiagramContent(type);
            
            // Create modal-like overlay
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                z-index: 1000;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const modal = document.createElement('div');
            modal.style.cssText = `
                background: white;
                border-radius: 15px;
                padding: 30px;
                max-width: 900px;
                max-height: 80vh;
                overflow-y: auto;
                position: relative;
                width: 100%;
            `;
            
            modal.innerHTML = `
                <button onclick="this.parentElement.parentElement.remove()" style="
                    position: absolute;
                    top: 15px;
                    right: 15px;
                    background: #ff7675;
                    color: white;
                    border: none;
                    border-radius: 50%;
                    width: 40px;
                    height: 40px;
                    cursor: pointer;
                    font-size: 1.2rem;
                    font-weight: bold;
                ">×</button>
                ${detailContent}
            `;
            
            overlay.appendChild(modal);
            document.body.appendChild(overlay);
            
            // Close on overlay click
            overlay.addEventListener('click', function(e) {
                if (e.target === overlay) {
                    overlay.remove();
                }
            });
        }

        function getDetailedDiagramContent(type) {
            const contents = {
                physical: `
                    <h2 style="color: #333; margin-bottom: 20px;">🏠 Physical Solar Infrastructure Details</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <div style="background: linear-gradient(135deg, #ffeaa7, #fab1a0); padding: 20px; border-radius: 10px;">
                            <h3>☀️ Solar Panels</h3>
                            <p>Monocrystalline/Polycrystalline panels convert sunlight to DC electricity with 18-22% efficiency</p>
                        </div>
                        <div style="background: linear-gradient(135deg, #74b9ff, #0984e3); color: white; padding: 20px; border-radius: 10px;">
                            <h3>🔄 Inverter</h3>
                            <p>Converts DC to AC power, includes MPPT tracking, grid synchronization, and safety shutdowns</p>
                        </div>
                        <div style="background: linear-gradient(135deg, #fd79a8, #fdcb6e); color: white; padding: 20px; border-radius: 10px;">
                            <h3>🔋 Battery Storage</h3>
                            <p>Lithium-ion batteries store excess energy for nighttime use or backup during outages</p>
                        </div>
                        <div style="background: linear-gradient(135deg, #00b894, #00cec9); color: white; padding: 20px; border-radius: 10px;">
                            <h3>📊 Smart Meter</h3>
                            <p>Bidirectional energy measurement, real-time monitoring, and IoT connectivity for trading</p>
                        </div>
                    </div>
                `,
                government: `
                    <h2 style="color: #333; margin-bottom: 20px;">🏛️ Government Scheme Integration</h2>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h3>💰 Subsidy Structure</h3>
                        <ul style="line-height: 1.8;">
                            <li><strong>Up to 3kW:</strong> 40% central government subsidy</li>
                            <li><strong>3kW to 10kW:</strong> 20% subsidy on additional capacity</li>
                            <li><strong>Above 10kW:</strong> No central subsidy (state subsidies may apply)</li>
                        </ul>
                    </div>
                    <div style="background: #e3f2fd; padding: 20px; border-radius: 10px;">
                        <h3>📋 Required Documents</h3>
                        <ul style="line-height: 1.8;">
                            <li>Aadhaar Card for eKYC verification</li>
                            <li>Electricity bill (last 3 months)</li>
                            <li>Property ownership documents</li>
                            <li>Bank account details for subsidy</li>
                            <li>Roof rights certificate</li>
                        </ul>
                    </div>
                `,
                iot: `
                    <h2 style="color: #333; margin-bottom: 20px;">📡 IoT Communication Architecture</h2>
                    <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h3>🔌 ESP32 Gateway Capabilities</h3>
                        <ul style="line-height: 1.8;">
                            <li>Dual-core processor for real-time data processing</li>
                            <li>Built-in WiFi and Bluetooth connectivity</li>
                            <li>Support for multiple sensor interfaces</li>
                            <li>Low power consumption for 24/7 operation</li>
                        </ul>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
                            <h4>📶 LoRa Network</h4>
                            <p>Long Range, Low Power wireless protocol for reliable local communication up to 10km range</p>
                        </div>
                        <div style="background: #fff3e0; padding: 15px; border-radius: 8px;">
                            <h4>🌐 MQTT Protocol</h4>
                            <p>Lightweight messaging protocol optimized for IoT devices with minimal bandwidth usage</p>
                        </div>
                    </div>
                `,
                blockchain: `
                    <h2 style="color: #333; margin-bottom: 20px;">⛓️ Blockchain Smart Contract Details</h2>
                    <div style="background: #f3e5f5; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h3>🔗 Smart Contract Features</h3>
                        <ul style="line-height: 1.8;">
                            <li><strong>Automated Execution:</strong> Self-executing contracts with terms directly written into code</li>
                            <li><strong>Escrow Protection:</strong> Funds locked until energy delivery confirmation</li>
                            <li><strong>Dispute Resolution:</strong> Built-in arbitration mechanisms</li>
                            <li><strong>Immutable Records:</strong> Permanent transaction history</li>
                        </ul>
                    </div>
                    <div style="background: #e8f5e8; padding: 20px; border-radius: 10px;">
                        <h3>💰 Dynamic Pricing Algorithm</h3>
                        <p>AI-powered pricing considers real-time supply/demand, grid conditions, weather forecasts, and historical data to optimize energy trading prices for maximum benefit to both buyers and sellers.</p>
                    </div>
                `,
                trading: `
                    <h2 style="color: #333; margin-bottom: 20px;">💹 P2P Trading Platform Features</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="background: linear-gradient(135deg, #ff7675, #fd79a8); color: white; padding: 15px; border-radius: 8px; text-align: center;">
                            <h4>📊 Real-time Market</h4>
                            <p>Live energy prices and availability</p>
                        </div>
                        <div style="background: linear-gradient(135deg, #00cec9, #55a3ff); color: white; padding: 15px; border-radius: 8px; text-align: center;">
                            <h4>🌍 Local Trading</h4>
                            <p>Proximity-based energy matching</p>
                        </div>
                        <div style="background: linear-gradient(135deg, #fdcb6e, #e17055); color: white; padding: 15px; border-radius: 8px; text-align: center;">
                            <h4>💳 Digital Wallet</h4>
                            <p>Secure payments and settlements</p>
                        </div>
                        <div style="background: linear-gradient(135deg, #6c5ce7, #a29bfe); color: white; padding: 15px; border-radius: 8px; text-align: center;">
                            <h4>📈 Analytics</h4>
                            <p>Trading history and insights</p>
                        </div>
                    </div>
                `,
                users: `
                    <h2 style="color: #333; margin-bottom: 20px;">👥 User Ecosystem & Roles</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <div style="background: #e3f2fd; padding: 20px; border-radius: 10px;">
                            <h3>🏠 Prosumers</h3>
                            <p><strong>Role:</strong> Generate and consume energy<br>
                            <strong>Benefits:</strong> Earn from excess solar energy, reduce electricity bills, contribute to green energy</p>
                        </div>
                        <div style="background: #f3e5f5; padding: 20px; border-radius: 10px;">
                            <h3>👨‍🔧 Technicians</h3>
                            <p><strong>Role:</strong> Install and maintain systems<br>
                            <strong>Benefits:</strong> Steady income, skill development, support green transition</p>
                        </div>
                        <div style="background: #e8f5e8; padding: 20px; border-radius: 10px;">
                            <h3>🏛️ Government</h3>
                            <p><strong>Role:</strong> Policy and subsidy management<br>
                            <strong>Benefits:</strong> Achieve renewable energy targets, reduce carbon emissions</p>
                        </div>
                        <div style="background: #fff3e0; padding: 20px; border-radius: 10px;">
                            <h3>🏭 DISCOM</h3>
                            <p><strong>Role:</strong> Grid management and regulation<br>
                            <strong>Benefits:</strong> Grid balancing, reduced peak load, better energy distribution</p>
                        </div>
                    </div>
                `,
                analytics: `
                    <h2 style="color: #333; margin-bottom: 20px;">📊 Analytics & Advanced Features</h2>
                    <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h3>🤖 AI/ML Features</h3>
                        <ul style="line-height: 1.8;">
                            <li><strong>Demand Forecasting:</strong> Predict energy consumption patterns</li>
                            <li><strong>Weather Integration:</strong> Solar generation forecasting</li>
                            <li><strong>Price Optimization:</strong> Dynamic pricing algorithms</li>
                            <li><strong>Anomaly Detection:</strong> System health monitoring</li>
                        </ul>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
                            <h4>💎 Carbon Credits</h4>
                            <p>Track environmental impact and earn tradeable carbon credits for clean energy generation</p>
                        </div>
                        <div style="background: #fff3e0; padding: 15px; border-radius: 8px;">
                            <h4>🏆 Gamification</h4>
                            <p>Leaderboards, achievements, and community challenges to encourage participation</p>
                        </div>
                    </div>
                `,
                cloud: `
                    <h2 style="color: #333; margin-bottom: 20px;">☁️ Cloud Infrastructure Components</h2>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h3>🚪 API Gateway</h3>
                        <p>Central entry point for all system communications, handling authentication, rate limiting, and request routing</p>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
                            <h4>🗄️ InfluxDB</h4>
                            <p>Time-series database optimized for IoT sensor data and energy metrics storage</p>
                        </div>
                        <div style="background: #f3e5f5; padding: 15px; border-radius: 8px;">
                            <h4>📈 Real-time Analytics</h4>
                            <p>Stream processing for live energy monitoring and instant trading decisions</p>
                        </div>
                    </div>
                `
            };
            
            return contents[type] || '<h2>Detailed information not available</h2>';
        }

        function showFlowDetail(step) {
            const details = {
                generation: {
                    title: "☀️ Solar Energy Generation",
                    content: "Solar panels convert sunlight into DC electricity through photovoltaic cells. MPPT controllers optimize power extraction based on irradiance and temperature conditions."
                },
                metering: {
                    title: "📊 Smart Meter Data Collection",
                    content: "Bidirectional smart meters measure both energy consumption and generation every 15 minutes, storing data locally before transmission to IoT gateway."
                },
                'iot-transfer': {
                    title: "📡 IoT Data Transmission",
                    content: "ESP32 gateway collects meter data via MODBUS, processes locally, and transmits via LoRa (primary) or GSM/4G (backup) to cloud services."
                },
                processing: {
                    title: "☁️ Cloud Data Processing",
                    content: "API gateway receives encrypted data, validates authenticity, stores in time-series database, and triggers real-time analytics and trading algorithms."
                },
                matching: {
                    title: "🤖 AI-Powered Matching",
                    content: "Machine learning algorithms match energy sellers with buyers based on proximity, pricing preferences, historical patterns, and grid optimization."
                },
                execution: {
                    title: "⛓️ Blockchain Smart Contract",
                    content: "Smart contracts automatically execute trades when conditions are met, handle escrow payments, and record immutable transaction records."
                },
                settlement: {
                    title: "💰 Payment Settlement",
                    content: "Upon energy delivery confirmation, smart contracts release escrowed payments, update digital wallets, and generate transaction receipts."
                }
            };
            
            const detail = details[step];
            if (detail) {
                document.getElementById('flow-detail-content').innerHTML = `
                    <h3>${detail.title}</h3>
                    <p style="line-height: 1.6; margin-top: 15px;">${detail.content}</p>
                `;
                document.getElementById('flow-details').style.display = 'block';
            }
        }

        function hideFlowDetail() {
            document.getElementById('flow-details').style.display = 'none';
        }

        // Initialize with overview diagram
        document.addEventListener('DOMContentLoaded', function() {
            showDiagram('overview');
        });
    </script>
</body>
</html>